<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Games | DevHub Studio</title>
<style>
  body {
    margin: 0;
    background: #0d1117;
    color: #fff;
    font-family: "Inter", sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  canvas {
    background: #111;
    border: 2px solid #0078ff;
    margin-top: 20px;
  }
  #score-board, #timer {
    margin-top: 10px;
    font-size: 1.2rem;
    font-weight: bold;
  }
  #skins {
    margin-top: 10px;
    display: flex;
    gap: 10px;
  }
  .skin {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    cursor: pointer;
    border: 2px solid #0078ff;
    display: flex;
    align-items: center;
    justify-content: center;
  }
</style>
</head>
<body>

<h2>Cass Hammer: Asteroid Blaster</h2>
<div id="score-board">Score: 0</div>
<div id="timer">Time: 1:00</div>
<div id="skins">
  <div class="skin" style="background:red;" data-color="red"></div>
  <div class="skin" style="background:green;" data-color="green"></div>
  <div class="skin" style="background:blue;" data-color="blue"></div>
  <div class="skin" style="background:yellow;" data-color="yellow"></div>
</div>
<canvas id="gameCanvas" width="600" height="400"></canvas>

<script>
// Setup
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
let score = 0;
const scoreBoard = document.getElementById("score-board");
const timerEl = document.getElementById("timer");
let playerColor = "red";
let unlockedSkins = ["red"];
let gameOver = false;

// Player
const player = { x: 300, y: 350, radius: 20, speed: 5, bullets: [] };

// Asteroids
let asteroids = [];
let asteroidSpeed = 2;
let spawnInterval = 1200;
let asteroidSpawner;

// Explosions
let explosions = [];

// Controls
const keys = {};

// Sounds
const shootSound = new Audio("https://freesound.org/data/previews/320/320181_5260877-lq.mp3");
const explosionSound = new Audio("https://freesound.org/data/previews/178/178186_3248244-lq.mp3");

// Skins selection
document.querySelectorAll(".skin").forEach(skin => {
  skin.addEventListener("click", () => {
    if (unlockedSkins.includes(skin.dataset.color)) {
      playerColor = skin.dataset.color;
    } else {
      alert("This skin is locked! Earn points to unlock.");
    }
  });
});

// Controls
document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

// Shooting
function shoot() {
  if(gameOver) return;
  if (keys[" "] || keys["ArrowUp"]) {
    if (!player.shootCooldown) {
      player.bullets.push({ x: player.x, y: player.y - player.radius, radius: 5, speed: 7 });
      shootSound.currentTime = 0;
      shootSound.play();
      player.shootCooldown = true;
      setTimeout(() => player.shootCooldown = false, 300);
    }
  }
}

// Spawn asteroids
function spawnAsteroid() {
  if(gameOver) return;
  const typeRand = Math.random();
  let radius;
  if(typeRand < 0.5) radius = 15;
  else if(typeRand < 0.85) radius = 25;
  else radius = 40;

  const x = Math.random() * (canvas.width - radius*2) + radius;
  asteroids.push({ x, y: -radius, radius });
}

// Explosions
function addExplosion(x,y) {
  explosions.push({ x, y, radius: 0, max: 30 });
  explosionSound.currentTime = 0;
  explosionSound.play();
}

// Game Loop
function update() {
  if(gameOver) return;

  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Move player
  if(keys["ArrowLeft"] && player.x - player.radius > 0) player.x -= player.speed;
  if(keys["ArrowRight"] && player.x + player.radius < canvas.width) player.x += player.speed;
  shoot();

  // Draw player
  ctx.fillStyle = playerColor;
  ctx.beginPath();
  ctx.arc(player.x, player.y, player.radius, 0, Math.PI*2);
  ctx.fill();

  // Bullets
  player.bullets.forEach((b, bi) => {
    b.y -= b.speed;
    ctx.fillStyle = "#fff";
    ctx.beginPath();
    ctx.arc(b.x, b.y, b.radius,0,Math.PI*2);
    ctx.fill();
    if(b.y < 0) player.bullets.splice(bi,1);
  });

  // Asteroids
  asteroids.forEach((a, ai) => {
    a.y += asteroidSpeed;
    ctx.fillStyle = "gray";
    ctx.beginPath();
    ctx.arc(a.x, a.y, a.radius,0,Math.PI*2);
    ctx.fill();

    // Bullet collision
    player.bullets.forEach((b, bi) => {
      const dx = a.x - b.x;
      const dy = a.y - b.y;
      if(Math.sqrt(dx*dx + dy*dy) < a.radius + b.radius) {
        addExplosion(a.x, a.y);
        asteroids.splice(ai,1);
        player.bullets.splice(bi,1);
        score += Math.floor(a.radius);
        scoreBoard.textContent = `Score: ${score}`;
        // Unlock skins
        if(score >= 50 && !unlockedSkins.includes("green")) unlockedSkins.push("green");
        if(score >= 100 && !unlockedSkins.includes("blue")) unlockedSkins.push("blue");
        if(score >= 200 && !unlockedSkins.includes("yellow")) unlockedSkins.push("yellow");
      }
    });

    // Game over if asteroid reaches bottom
    if(a.y + a.radius > canvas.height) {
      gameOver = true;
    }
  });

  // Explosions
  explosions.forEach((exp, ei) => {
    ctx.fillStyle = `rgba(255,255,0,${1-exp.radius/exp.max})`;
    ctx.beginPath();
    ctx.arc(exp.x, exp.y, exp.radius,0,Math.PI*2);
    ctx.fill();
    exp.radius += 2;
    if(exp.radius >= exp.max) explosions.splice(ei,1);
  });

  if(!gameOver) requestAnimationFrame(update);
}

// Timer
let timeLeft = 60; // seconds
function countdown() {
  if(timeLeft <= 0) {
    gameOver = true;
    clearInterval(asteroidSpawner);
    alert(`Time's up! Final Score: ${score}`);
    return;
  }
  let minutes = Math.floor(timeLeft/60);
  let seconds = timeLeft % 60;
  timerEl.textContent = `Time: ${minutes}:${seconds < 10 ? "0"+seconds : seconds}`;
  timeLeft--;
}

// Start
asteroidSpawner = setInterval(spawnAsteroid, spawnInterval);
setInterval(countdown, 1000);
update();
</script>

</body>
</html>
